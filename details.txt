neon db doctors table.

-- Enable UUID generation
CREATE EXTENSION IF NOT EXISTS pgcrypto;

CREATE TABLE IF NOT EXISTS doctors (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  -- department will be added later (nullable now)
  department_id UUID NULL,

  slug VARCHAR(255) UNIQUE NOT NULL,

  name_en VARCHAR(255) NOT NULL,
  name_hi VARCHAR(255),
  name_mr VARCHAR(255),

  specialization_en VARCHAR(255),
  specialization_hi VARCHAR(255),
  specialization_mr VARCHAR(255),

  consultation_fee NUMERIC(10,2) NOT NULL DEFAULT 0,

  bio_en TEXT,
  bio_hi TEXT,
  bio_mr TEXT,

  image_url TEXT,
  is_active BOOLEAN DEFAULT TRUE,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX IF NOT EXISTS doctors_is_active_idx ON doctors(is_active);
CREATE INDEX IF NOT EXISTS doctors_slug_idx ON doctors(slug);
  

  ---------------------------------------------


  run this when department table is created in future 

  ALTER TABLE doctors
ADD CONSTRAINT doctors_department_fk
FOREIGN KEY (department_id) REFERENCES departments(id);


---------------------------------------------------------



step 1 
CREATE EXTENSION IF NOT EXISTS pgcrypto;

CREATE TABLE IF NOT EXISTS doctors (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  department_id UUID NULL,
  slug VARCHAR(255) UNIQUE NOT NULL,
  name_en VARCHAR(255) NOT NULL,
  name_hi VARCHAR(255),
  name_mr VARCHAR(255),
  specialization_en VARCHAR(255),
  specialization_hi VARCHAR(255),
  specialization_mr VARCHAR(255),
  consultation_fee NUMERIC(10,2) NOT NULL DEFAULT 0,
  bio_en TEXT,
  bio_hi TEXT,
  bio_mr TEXT,
  image_url TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX IF NOT EXISTS doctors_is_active_idx ON doctors(is_active);
CREATE INDEX IF NOT EXISTS doctors_slug_idx ON doctors(slug);


Step 2 — Add your Neon connection string

In Neon dashboard → Connection string → copy the URL.

Create a file in project root:

.env.local
DATABASE_URL="YOUR_NEON_CONNECTION_STRING_HERE"


✅ Restart server after adding env:


step 3
Create a DB helper (one file)
lib/db.js
import { neon } from "@neondatabase/serverless";

if (!process.env.DATABASE_URL) {
  throw new Error("DATABASE_URL is missing in .env.local");
}

export const sql = neon(process.env.DATABASE_URL);


Step 4

Create Doctor queries (fetch functions)
lib/queries/doctors.js
import { sql } from "@/lib/db";

export async function getDoctors({ activeOnly = true } = {}) {
  const where = activeOnly ? sql`WHERE is_active = TRUE` : sql``;

  const rows = await sql`
    SELECT
      id, slug,
      name_en, name_hi, name_mr,
      specialization_en, specialization_hi, specialization_mr,
      consultation_fee, image_url, is_active
    FROM doctors
    ${where}
    ORDER BY name_en ASC
  `;

  return rows;
}

export async function getDoctorBySlug(slug) {
  const clean = String(slug || "").trim().toLowerCase();

  const rows = await sql`
    SELECT *
    FROM doctors
    WHERE LOWER(slug) = ${clean}
    LIMIT 1
  `;

  return rows[0] || null;
}


Step 5 — Insert (populate) doctors into Neon

Run this SQL in Neon:

INSERT INTO doctors
(slug, name_en, name_hi, name_mr, specialization_en, specialization_hi, specialization_mr, consultation_fee, bio_en, bio_hi, bio_mr, image_url, is_active)
VALUES
(
  'dr-prashant-rahate',
  'Dr. Prashant Rahate',
  'डॉ. प्रशांत रहाटे',
  'डॉ. प्रशांत रहाटे',
  'Gastroenterology',
  'गॅस्ट्रोएन्टेरोलॉजी',
  'गॅस्ट्रोएन्टेरोलॉजी',
  500,
  'Dr. Prashant Rahate is a senior specialist with extensive experience in digestive health. He focuses on accurate diagnosis and patient-first treatment.\n\nHe believes in compassionate care, clear communication, and modern technology to support quick recovery.',
  'डॉ. प्रशांत रहाटे हे पचनसंस्थेच्या आरोग्यासाठी अनुभवी तज्ज्ञ आहेत. ते अचूक निदान आणि रुग्ण-केंद्रित उपचारांवर भर देतात.\n\nत्यांचा दृष्टिकोन करुणा, स्पष्ट संवाद आणि आधुनिक तंत्रज्ञानावर आधारित आहे.',
  'डॉ. प्रशांत रहाटे हे पचनसंस्थेच्या आरोग्यासाठी अनुभवी तज्ज्ञ आहेत. ते अचूक निदान आणि रुग्ण-केंद्रित उपचारांवर भर देतात.\n\nत्यांचा दृष्टिकोन करुणा, स्पष्ट संवाद आणि आधुनिक तंत्रज्ञानावर आधारित आहे.',
  'https://images.unsplash.com/photo-1537368910025-700350fe46c7?auto=format&fit=crop&w=800&q=80',
  TRUE
);


Add more doctors by copying the row and changing values.

✅ Quick check:

SELECT slug, name_en FROM doctors;

Step 6 — Doctors List Page (App Router)

Create:

app/[lang]/doctors/page.js
import Link from "next/link";
import Image from "next/image";
import { getDoctors } from "@/lib/queries/doctors";

export default async function DoctorsPage({ params }) {
  const { lang } = await params;
  const doctors = await getDoctors();

  const pick = (row, key) => row[`${key}_${lang}`] || row[`${key}_en`];

  return (
    <div className="mx-auto max-w-7xl px-4 sm:px-8 py-10">
      <h1 className="text-3xl sm:text-4xl font-bold text-[#265957]">
        Our Doctors
      </h1>
      <p className="mt-2 text-gray-600">
        Choose a specialist and book your consultation.
      </p>

      <div className="mt-8 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
        {doctors.map((d) => (
          <Link
            key={d.id}
            href={`/${lang}/doctors/${d.slug}`}
            className="bg-white rounded-2xl shadow border border-gray-100 hover:shadow-lg transition p-4"
          >
            <div className="relative w-full aspect-[4/5] rounded-xl overflow-hidden bg-gray-100">
              <Image
                src={d.image_url || "/assets/doctor-placeholder.png"}
                alt={pick(d, "name")}
                fill
                className="object-cover"
              />
            </div>

            <h3 className="mt-3 font-semibold text-gray-900 text-sm sm:text-base">
              {pick(d, "name")}
            </h3>

            <p className="text-xs sm:text-sm text-gray-500 mt-1">
              {pick(d, "specialization")}
            </p>

            <p className="text-xs sm:text-sm font-semibold text-[#255C8D] mt-2">
              ₹{Number(d.consultation_fee).toFixed(0)} Consultation Fee
            </p>
          </Link>
        ))}
      </div>
    </div>
  );
}

Step 7 — Doctor Detail Page (by slug)

Create:

app/[lang]/doctors/[slug]/page.js
import Image from "next/image";
import Link from "next/link";
import { notFound } from "next/navigation";
import { getDoctorBySlug } from "@/lib/queries/doctors";

export default async function DoctorDetailPage({ params }) {
  const { lang, slug } = await params;

  const doctor = await getDoctorBySlug(slug);
  if (!doctor) return notFound();

  const pick = (row, key) => row[`${key}_${lang}`] || row[`${key}_en`];

  return (
    <div className="mx-auto max-w-5xl px-4 sm:px-8 py-10">
      <div className="flex flex-col md:flex-row gap-8">
        <div className="relative w-full md:w-[320px] aspect-[4/5] rounded-2xl overflow-hidden bg-gray-100">
          <Image
            src={doctor.image_url || "/assets/doctor-placeholder.png"}
            alt={pick(doctor, "name")}
            fill
            className="object-cover"
          />
        </div>

        <div className="flex-1">
          <h1 className="text-3xl sm:text-4xl font-bold text-[#265957]">
            {pick(doctor, "name")}
          </h1>

          <p className="mt-2 text-gray-600">
            {pick(doctor, "specialization")}
          </p>

          <p className="mt-4 text-sm sm:text-base text-gray-700 leading-relaxed whitespace-pre-line">
            {doctor[`bio_${lang}`] || doctor.bio_en}
          </p>

          <p className="mt-6 text-lg font-semibold text-[#255C8D]">
            ₹{Number(doctor.consultation_fee).toFixed(0)} Consultation Fee
          </p>

          <div className="mt-6 flex flex-wrap gap-3">
            <Link
              href={`/${lang}/consultation?doctor=${doctor.slug}`}
              className="px-5 py-2.5 rounded-xl bg-[#255C8D] text-white font-semibold hover:opacity-95 transition"
            >
              Book Appointment
            </Link>

            <Link
              href={`/${lang}/doctors`}
              className="px-5 py-2.5 rounded-xl border border-gray-300 font-semibold hover:bg-gray-50 transition"
            >
              Back to Doctors
            </Link>
          </div>
        </div>
      </div>
    </div>
  );
}

Step 8 — IMPORTANT: Allow external image URLs (Next Image)

Because you’re using an image URL, add domains:

next.config.mjs
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "images.unsplash.com",
      },
    ],
  },
};

export default nextConfig;




for newsletter and enquiries

CREATE EXTENSION IF NOT EXISTS pgcrypto;

CREATE TABLE IF NOT EXISTS enquiries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  wants_email_updates BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS newsletter_subscribers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255),
  phone VARCHAR(20) UNIQUE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

footer code
import React from "react";
import Image from "next/image";
import Link from "next/link";

export default function Footer({ lang = "en" }) {
  return (
    <footer className="mt-10">
      <div className="bg-[#295D8B] text-white flex flex-col md:flex-row items-start justify-center px-6 md:px-16 lg:px-32 gap-10 py-14 border-b border-white/20">
        {/* Brand */}
        <div className="w-full md:w-1/3">
          <div className="flex items-center gap-3">
            <Link href={`/${lang}`}>
              <Image
                className="w-28 md:w-32"
                src="/assets/bottom-logo.png" // put in public/assets/
                width={140}
                height={60}
                alt="JSA Hospital Logo"
                priority
              />
            </Link>
          </div>

          <h2 className="mt-3 text-lg font-semibold">JSA Hospital</h2>
          <p className="mt-4 text-sm text-gray-200 leading-relaxed">
            Providing compassionate healthcare with cutting-edge medical
            technology and experienced professionals dedicated to your
            wellbeing.
          </p>
        </div>

        {/* Quick Links */}
        <div className="w-full md:w-1/5">
          <h2 className="font-medium text-white mb-5">Quick Links</h2>
          <ul className="text-sm text-gray-200 space-y-2">
            <li>
              <Link className="hover:underline transition" href={`/${lang}`}>
                Home
              </Link>
            </li>
            <li>
              <Link
                className="hover:underline transition"
                href={`/${lang}/about-us`}
              >
                About us
              </Link>
            </li>
            <li>
              <Link
                className="hover:underline transition"
                href={`/${lang}/doctors`}
              >
                Find a Doctor
              </Link>
            </li>
            <li>
              <Link
                className="hover:underline transition"
                href={`/${lang}/departments`}
              >
                Departments
              </Link>
            </li>
            <li>
              <Link
                className="hover:underline transition"
                href={`/${lang}/book-tests`}
              >
                Book Tests
              </Link>
            </li>
          </ul>
        </div>

        {/* Patient Services */}
        <div className="w-full md:w-1/5">
          <h2 className="font-medium text-white mb-5">Patient Services</h2>
          <ul className="text-sm text-gray-200 space-y-2">
            <li>
              <Link
                className="hover:underline transition"
                href={`/${lang}/consultation`}
              >
                Book Appointment
              </Link>
            </li>
            <li>
              <span className="opacity-80">Lab Reports</span>
            </li>
            <li>
              <span className="opacity-80">Patient Feedback</span>
            </li>
          </ul>
        </div>

        {/* Contact */}
        <div className="w-full md:w-1/4">
          <h2 className="font-medium text-white mb-5">Contact Information</h2>
          <div className="text-gray-200 text-sm space-y-2">
            <a className="hover:underline" href="tel:+919999999999">
              +91 9999999999
            </a>
            <p>email@gmail.com</p>
            <p>
              Address: 123 Medical Center Drive Healthcare District Mumbai,
              Maharashtra 400001
            </p>
          </div>
        </div>
      </div>

      <p className="bg-[#295D8B] text-white py-4 text-center text-xs md:text-sm">
        Copyright 2025 © Balaji LifeCare All Right Reserved.
      </p>
    </footer>
  );
}




consultation/page.js 

import React from 'react'

const page = () => {
  return (
    <>
      <div className="mb-4"></div>
      <div className="text-center gap-9 flex-wrap  sm:flex justify-center bg-gray-200 py-10 ">
        <div className="w-full text-2xl flex justify-center">
          <h1 className="font-medium text-blue-400">Book Appointment</h1>
        </div>

        <div className="">
          <div>
            <form>
              <input
                required
                type="text"
                placeholder="Patient Name"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white border-black border-1"
              />
            </form>
          </div>
          <div>
            <form action="">
              <input
                required
                type="email"
                placeholder="Email"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white border-black border-1"
              />
            </form>
          </div>
          <div>
            <form action="">
              <input
                required
                type="text"
                placeholder="City"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white border-black border-1"
              />
            </form>
          </div>
          <div>
            <form action="">
              <input
                required
                type="date"
                placeholder="Date of birth"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white text-gray-500 border-black border-1"
              />
            </form>
          </div>
        </div>

        <div>
          <div>
            <form>
              <input
                required
                type="number"
                placeholder="Patient Phone"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white border-black border-1"
              />
            </form>
          </div>
          <div className="items-center">
            <select className="px-3 w-80 md:w-130 h-8 my-2 text-gray-500 bg-white border-black border-1">
              <option>Select Speciality</option>
              <option>Urology</option>
              <option>Nephrology</option>
              <option>Cardiology</option>
              <option>Gynaecology</option>
              <option>Orthopaedic</option>
              <option>Oncology</option>
            </select>
          </div>

          <div className=" items-center">
            <select className="px-3 w-80 md:w-130 h-8 my-2 text-gray-500 bg-white border-black border-1">
              <option>Doctor</option>
              <option>Dr. 1</option>
              <option>Dr. 2</option>
              <option>Dr. 3</option>
              <option>Dr. 4</option>
              <option>Dr. 5</option>
            </select>
          </div>

          <div className=" items-center">
            <form action="">
              
              <input
                required
                type="date"
                placeholder="Date of birth"
                className="px-3 w-80 md:w-130 h-8 my-2 bg-white text-gray-500 border-black border-1"
              />
            </form>
          </div>
        </div>
        <div className="flex flex-col items-center gap-4">
          {/* <form action="">
            <textarea
              required
              type='text'
              placeholder="What problem are you facing"
              className="px-3 h-20 w-80 md:mt-0 sm:mt-3 mt-3 sm:w-169  md:w-269 bg-white text-gray-500 border-black border-1"
            />
          </form> */}
        </div>
        <div className="w-full flex justify-center">
          <button className="px-6 mt-3 sm:mt-0 py-2 bg-blue-600 hover:bg-blue-400 hover:scale-105 text-white">
            Submit
          </button>
        </div>
      </div>
    </>
  );
}

export default page






CREATE TABLE IF NOT EXISTS doctor_timings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  doctor_id UUID NOT NULL REFERENCES doctors(id) ON DELETE CASCADE,
  day_of_week INT NOT NULL CHECK (day_of_week BETWEEN 0 AND 6),
  start_time TIME NOT NULL,
  end_time TIME NOT NULL,
  slot_duration_min INT NOT NULL DEFAULT 30,
  is_active BOOLEAN DEFAULT TRUE,
  UNIQUE (doctor_id, day_of_week)
);




CREATE TABLE IF NOT EXISTS appointments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  doctor_id UUID NOT NULL REFERENCES doctors(id) ON DELETE CASCADE,
  schedule_time TIMESTAMPTZ NOT NULL,
  slot_duration_min INT NOT NULL DEFAULT 30,
  status VARCHAR(20) NOT NULL DEFAULT 'confirmed',
  patient_name VARCHAR(255) NOT NULL,
  patient_phone VARCHAR(20) NOT NULL,
  health_issue TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- prevent same doctor + same slot booked twice (simple fixed-slot system)
CREATE UNIQUE INDEX IF NOT EXISTS uniq_doctor_slot_active
ON appointments(doctor_id, schedule_time)
WHERE status IN ('confirmed','hold');






departments/[slug]/page.js

// app/[lang]/departments/[slug]/page.js
import { notFound } from "next/navigation";
import Link from "next/link";
import { getDepartmentBySlug } from "@/lib/queries/departments";
import { getDoctorsByDepartmentUuid } from "@/lib/queries/doctors";


function pickLang(lang, obj, keyBase) {
  if (lang === "hi") return obj[`${keyBase}_hi`] || obj[`${keyBase}_en`] || "";
  if (lang === "mr") return obj[`${keyBase}_mr`] || obj[`${keyBase}_en`] || "";
  return obj[`${keyBase}_en`] || "";
}



export default async function DepartmentDetail({ params }) {
  const { lang, slug } = await params;

  const dept = await getDepartmentBySlug(slug);
  if (!dept) return notFound();

  const deptName = pickLang(lang, dept, "name");
  const deptDesc = pickLang(lang, dept, "description");

  const doctors = await getDoctorsByDepartmentUuid(dept.uuid_id);

  return (
    <div className="mx-auto max-w-6xl px-4 sm:px-8 py-10">
      <Link
        href={`/${lang}/departments`}
        className="text-sm text-blue-700 hover:underline"
      >
        ← Back to Departments
      </Link>

      {/* Horizontal image */}
      <div className="mt-4 overflow-hidden rounded-2xl border bg-gray-50">
        {dept.image_url ? (
          // eslint-disable-next-line @next/next/no-img-element
          <img
            src={dept.image_url}
            alt={deptName}
            className="w-full h-44 sm:h-56 md:h-64 object-cover"
          />
        ) : (
          <div className="w-full h-44 sm:h-56 md:h-64 grid place-items-center text-gray-500">
            No image
          </div>
        )}
      </div>

      <div className="mt-6 flex items-center gap-3">
        <div className="text-3xl">{dept.icon}</div>
        <h1 className="text-3xl font-bold text-[#265957]">{deptName}</h1>
      </div>

      {/* Long description - keep line breaks */}
      <p className="mt-5 text-gray-700 leading-relaxed whitespace-pre-line">
        {deptDesc || "Description coming soon."}
      </p>

      <h2 className="mt-10 text-xl font-semibold text-[#265957]">
        Doctors in this department
      </h2>

      {doctors.length === 0 ? (
        <p className="mt-2 text-gray-600">
          No doctors listed under this department yet.
        </p>
      ) : (
        <div className="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          {doctors.map((doc) => {
            const doctorName = pickLang(lang, doc, "name");
            const spec = pickLang(lang, doc, "specialization");

            return (
              <div
                key={doc.id}
                className="bg-white rounded-xl border shadow-sm p-4 hover:shadow-md transition"
              >
                <div className="font-semibold text-lg">{doctorName}</div>
                {spec && (
                  <div className="text-sm text-gray-600 mt-1">{spec}</div>
                )}

                {/* Optional image if you have it */}
                {doc.image_url ? (
                  // eslint-disable-next-line @next/next/no-img-element
                  <img
                    src={doc.image_url}
                    alt={doctorName}
                    className="mt-3 w-full h-40 object-cover rounded-lg"
                  />
                ) : null}
              </div>
            );
          })}
        </div>
      )}
    </div>
  );
}




book tests / page.js

import Image from "next/image";

export default function BookTestsPage({ params }) {
  const { lang } = params;

  // ✅ Hardcoded for now
  const phoneNumberDisplay = "+91 98765 43210";
  const phoneNumberDial = "919876543210"; // digits only for tel:
  const tests = [
    { id: 1, name: "Complete Blood Count (CBC)", icon: "/tests/cbc.png" },
    { id: 2, name: "Lipid Profile", icon: "/tests/lipid.png" },
    { id: 3, name: "Thyroid Profile (T3/T4/TSH)", icon: "/tests/thyroid.png" },
    { id: 4, name: "Liver Function Test (LFT)", icon: "/tests/lft.png" },
    { id: 5, name: "Kidney Function Test (KFT)", icon: "/tests/kft.png" },
    { id: 6, name: "HbA1c (Diabetes)", icon: "/tests/hba1c.png" },
  ];

  return (
    <div className="bg-gray-100 min-h-[70vh] py-10 px-4">
      <div className="mx-auto max-w-4xl">
        <h1 className="text-2xl sm:text-3xl font-semibold text-blue-600 text-center">
          Book Lab Tests
        </h1>
        <p className="mt-2 text-center text-sm sm:text-base text-gray-600">
          Call us to book a test. (Temporarily hardcoded)
        </p>

        <div className="mt-8 space-y-4">
          {tests.map((t) => (
            <div
              key={t.id}
              className="
                flex items-center gap-3 sm:gap-4
                rounded-xl bg-white p-3 sm:p-4
                shadow-sm border
              "
            >
              {/* Left: circle logo */}
              <div className="shrink-0">
                <div className="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gray-50 border grid place-items-center overflow-hidden">
                  {/* If you don't have icons yet, keep a placeholder image or use initials */}
                  <Image
                    src={t.icon}
                    alt={t.name}
                    width={56}
                    height={56}
                    className="object-cover"
                  />
                </div>
              </div>

              {/* Middle: rectangle with test name */}
              <div className="flex-1">
                <div
                  className="
                    w-full
                    rounded-lg bg-gray-50 border
                    px-3 py-2 sm:px-4 sm:py-3
                    text-gray-900 font-medium
                    text-sm sm:text-base
                    leading-snug
                  "
                >
                  {t.name}
                </div>
              </div>

              {/* Right: call-to-action button */}
              <div className="shrink-0">
                <a
                  href={`tel:${phoneNumberDial}`}
                  className="
                    inline-flex items-center justify-center
                    rounded-lg bg-blue-600 text-white
                    px-3 py-2 sm:px-4 sm:py-3
                    text-sm sm:text-base font-semibold
                    shadow-sm
                    transition hover:bg-blue-700 active:scale-[0.98]
                    whitespace-nowrap
                  "
                  aria-label={`Call to book: ${phoneNumberDisplay}`}
                >
                  Call {phoneNumberDisplay}
                </a>
              </div>
            </div>
          ))}
        </div>

        {/* Optional footer note */}
        <div className="mt-8 text-center text-xs sm:text-sm text-gray-500">
          For emergencies, please call your local emergency number.
        </div>
      </div>
    </div>
  );
}
